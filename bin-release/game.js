window.onload=function(){"use strict";function a(){function a(a,b,c,h){var i=4;F(pb,Fb,Eb,2),pb.beginPath(),pb.moveTo(a(-i),b(-i)),pb.lineTo(a(Z+$),b(-i)),pb.lineTo(a(Z+$),b(Z)),pb.arcTo(a(Z+$),b(Z+$),a(Z),b(Z+$),$),pb.lineTo(a(-i),b(Z+$)),pb.closePath(),pb.fill(),pb.stroke(),n(o(a(Z),b(Z),$,Mb)),n(p(a(0),b(Z+$),a(Z),b(Z+$),Mb)),n(p(a(Z+$),b(0),a(Z+$),b(Z),Mb));var j=a==u?f:g;pb.font="64px sans-serif",pb.textAlign="center",pb.textBaseline="middle",F(pb,Ib[c][1]),pb.fillText(V(j),a(Z+$+130)-2,b(50)-3),F(pb,Ib[h][1]),j=b==u?d:e,pb.fillText(V(j),a(50)-2,b(Z+$+130)-3),pb.font="16px sans-serif",pb.textAlign="center",pb.textBaseline="middle",F(pb,Ib[c][1]),pb.fillText(Xb[c],a(Z+$+30),b(12)),F(pb,Ib[h][1]),pb.fillText(Xb[h],a(16),b(Z+$+12))}var b=D(kb,kb),c=E(b);G(c,0,0,kb,kb,Bb),G(c,0,0,kb-1,kb-1,Cb),G(c,0,0,kb-2,kb-2,Ab),G(pb,0,0,ib,ib,b),pb.globalAlpha=.1,G(pb,0,ib-Z-2,ib,Z,Ib[Sb][1]),G(pb,ib-Z-2,0,Z,ib,Ib[Tb][1]),G(pb,0,0,ib,Z,Ib[Ub][1]),G(pb,0,0,Z,ib,Ib[Vb][1]),pb.globalAlpha=1,pb.globalCompositeOperation="source-over",F(pb,Ab,Db,2),J(pb,0,0,ib,ib),J(pb,ib,0,0,ib),I(pb,jb,jb,8,W,W);var d=8679,e=8681,f=8678,g=8680;a(u,u,2,3),a(u,v,0,3),a(v,u,2,1),a(v,v,0,1);var h=nb,i=h/2;zb.translate(4,4),F(zb,"#aef","#5af",2),zb.beginPath(),zb.moveTo(i,0),zb.quadraticCurveTo(h,-3,h,i),zb.quadraticCurveTo(h,h+1,i,h-2),zb.quadraticCurveTo(2,h,0,i),zb.quadraticCurveTo(-3,-1,i,0),zb.fill(),zb.stroke(),F(zb,X,"#fff",2),J(zb,8,4,4,20),J(zb,16,2,8,26,0,1),J(zb,36,14,18,36,0,1),J(zb,38,18,26,36,0,2),F(zb,X,"#58f",2),J(zb,i-4,10,i-4,18),J(zb,i+4,10,i+4,18),zb.translate(h+8,0),F(zb,"#fa0","#f00",2),zb.beginPath(),zb.moveTo(i,-4),zb.lineTo(i+6,14),zb.lineTo(h-4,8),zb.quadraticCurveTo(h,h+3,i,h-2),zb.quadraticCurveTo(2,h,4,8),zb.lineTo(i-6,14),zb.lineTo(i,-4),zb.fill(),zb.stroke(),J(zb,i-3,26,i-8,20),J(zb,i+3,26,i+8,20),zb.translate(h+8,0),F(zb,"#fd7","#d72",2),zb.beginPath(),zb.moveTo(i,0),zb.quadraticCurveTo(h,10,h-8,h-8),zb.quadraticCurveTo(h,h+1,i+2,h-6),zb.quadraticCurveTo(14,h-12,2,h-4),zb.quadraticCurveTo(-2,h-10,4,i),zb.quadraticCurveTo(0,0,i,0),zb.fill(),zb.stroke(),F(zb,"#d72"),I(zb,10,7,1,W),I(zb,24,9,1,W),I(zb,7,20,1,W),I(zb,20,14,1,W),I(zb,8,30,1,W),I(zb,28,32,1,W),F(zb,"#000","#d72",1);for(var j=0;2>j;j++){var k;0===j?(zb.globalCompositeOperation="destination-out",k=W):(zb.globalCompositeOperation="source-over",k=X),zb.scale(1,1.5),I(zb,13,14,4,k,W),zb.scale(1,2/3),zb.scale(1,1.5),I(zb,26,14,4,k,W),zb.scale(1,2/3)}zb.translate(h+8,0),zb.lineCap="round",F(zb,0,"#fff",2),I(zb,i,i,i-4,X,W),F(0,0,1),zb.beginPath(),zb.arc(i,i,i-8,3.2,4.4),zb.stroke(),I(zb,i-4,i+4,4,X,W),I(zb,i+4,i+4,4,X,W)}function b(){ec=Date.now(),sc=0,qc=!1,dc=oc,kc=0,Zb=[],$b=[],a(),k()}function c(){if(!qc)if(Jc.right||Ic.space)rc>sc&&sc++;else if(sc>0){var a=.1+.9*sc/rc,b=Ac+Bc*a;Cc=b*R.cos(uc),Dc=b*R.sin(uc),Ec=yc+zc*a,qc=!0,jc="start"}for(var c=0;c<bc.length;c++){var d,e=bc[c],f=!e.mirror;d=1==e.elt?f?Ic.up||Ic.right:Ic.down||Ic.left:f?Ic.up||Ic.left:Ic.down||Ic.right;var g=e.ux,h=e.uy;e.cpt=e.cpt||0;var i=9;if(e.max=!1,d?e.cpt<i?e.cpt++:e.max=!0:e.cpt>0&&e.cpt--,e.prevX2=e.x2,e.prevY2=e.y2,e.movingUp=d&&!e.max,e.moving=0!==e.cpt,e.cpt>0){var j=e.amax*(e.cpt/i);e.mirror&&(j*=-1);var k=R.cos(j),l=R.sin(j);g=e.ux*k-e.uy*l,h=e.ux*l+e.uy*k}e._ux=g,e._uy=h,e.x2=e.x+g,e.y2=e.y+h}Jc.middle&&(sc=0,qc=!0,ac.x=Jc.x,ac.y=Jc.y,ac.v.x=ac.v.y=0,Ec=0,Jc.middle=!1),Jc.left&&ac.elt!=Wb&&0===Ec&&kc>0&&(Hc.x=Jc.x-ac.x,Hc.y=Jc.y-ac.y,y(Hc,Ac+.5*Bc),ac.v.x=Hc.x,ac.v.y=Hc.y,Ec=10,Cc=ac.v.x,Dc=ac.v.y,jc="click",Jc.left=!1),kc>0&&kc--}function d(){var a,b,c,d;for(b=cc.length,a=0;b>a;a++)c=cc[a],c.a+=c.da,c.x=jb+R.cos(c.a)*c.d,c.y=jb+R.sin(c.a)*c.d;for(b=$b.length,a=0;b>a;a++){if(c=$b[a],c.elt!=ac.elt&&ac.elt!=Wb){var e=x(ac.x-c.x,ac.y-c.y);200>e&&(c.elt==Yb[ac.elt]?(c.tx=c.hx,c.ty=c.hy):(c.tx=ac.x,c.ty=ac.y))}if(D=c.tx-c.x,E=c.ty-c.y,25>D*D+E*E){var f=U()*S*2;c.tx=jb+R.cos(f)*hb,c.ty=jb+R.sin(f)*hb}else G=x(D,E),c.x+=D*xc/G,c.y+=E*xc/G}if(qc){var g=0,h=0,j=wc,k=vc;D=jb-ac.x,E=jb-ac.y;var l=ab/2,m=x(D,E);l>m&&(D/=m,E/=m,j*=.1+.9*m/l,k*=.5+.5*m/l);var n=ac.x-jb,o=ac.y-jb;o>n?o>-n?h=j:g=-j:o>-n?g=j:h=-j,ac.v.x+=g,ac.v.y+=h,Ec>0&&(Ec--,ac.v.x+=Cc,ac.v.y+=Dc),ac.v.x*ac.v.x+ac.v.y*ac.v.y>k*k&&y(ac.v,k),ac.x+=ac.v.x,ac.y+=ac.v.y,ac.collide=!1;{ac.v.x,ac.v.y}for(d=Zb.length,b=d+$b.length,a=0;b>a;a++)if(c=d>a?Zb[a]:$b[a-d],c!=ac){c.collide=!1;var p,q=Hc;if(c.shape==Jb){if(z(ac,c)){if(c.kind==Qb&&(Yb[ac.elt]==c.elt&&(c.dead=!0,kc=Fc),c.dead))continue;c.collide=!0,q.x=ac.x-c.x,q.y=ac.y-c.y,p=x(q.x,q.y),c.kind==Nb&&ac.elt!=Wb&&(kc+=50,kc>Fc&&(kc=Fc)),c.kind==Qb&&c.elt!=ac.elt&&(ic=pc,ac.elt!=Wb?ac.elt=Wb:_b.n<_b.length&&(_b.n++,bb=_b[_b.n-1],bb.m=c,bb.dx=q.x*(lc-nc)/p,bb.dy=q.y*(lc-nc)/p,fc=pc,gc=-1)),q.l=c.r+ac.r-p,q.x=q.x/p,q.y=q.y/p}}else if(c.shape==Kb){var r=c.kind==Pb&&c.movingUp;if(!r&&A(ac,c,q)){c.collide=!0,B(Gc,c.x,c.y,c.x2,c.y2);var s=C(Gc,ac.x,ac.y)!==C(Gc,ac.prevX,ac.prevY);0>=s?p=ac.r-q.l:(p=ac.r+q.l,q.x*=-1,q.y*=-1),q.x/=q.l,q.y/=q.l,q.l=p}if(r){var t,u,v=A(ac,c,q),w=1==c.elt||3==c.elt;if(v||(B(Gc,c.x,c.y,c.prevX2,c.prevY2),t=C(Gc,ac.prevX,ac.prevY,w),B(Gc,c.x,c.y,c.x2,c.y2),u=C(Gc,ac.x,ac.y,w)),v||t!==u){var D=ac.x-c.x,E=ac.y-c.y,F=D*c._ux+E*c._uy;if((v||F>0)&&(v||D*D+E*E<c.l*c.l)){c.collide=!0;var G=x(D,E),H=F/c.l;q.x=c.x+H*c._ux/c.l,q.y=c.y+H*c._uy/c.l,q.x=ac.x-q.x,q.y=ac.y-q.y,q.l=x(q.x,q.y),q.x/=q.l,q.y/=q.l;var I=c._uy/c.l,J=-c._ux/c.l;(c.mirror&&(0===c.elt||3==c.elt)||!c.mirror&&(1==c.elt||2==c.elt))&&(I*=-1,J*=-1);var K=I*q.x+J*q.y;0>K&&(q.x*=-1,q.y*=-1),q.l=q.l+ac.r,ac.x+=q.x*q.l,ac.y+=q.y*q.l,ac.collide=!0;var L=H/c.l;L=.1+.9*(.3*L+.7*L*L);var M=yc+L*zc>>0,N=Ac+Bc*L,O=q.x*N,P=q.y*N;Ec&&jc==Pb?(Ec=M,Cc=.2*O+Cc,Dc=.2*P+Dc):(Ec=M,Cc=O,Dc=P),jc=Pb,kc=Fc,Cc*=.8+.4*U(),Dc*=.8+.4*U(),ac.elt=c.elt;continue}}}}if(c.collide){Ec=0,ac.collide=!0,c.colCpt=20,ac.x+=q.x*q.l,ac.y+=q.y*q.l;var Q=x(ac.v.x,ac.v.y),T=ac.v.x/Q,V=ac.v.y/Q,W=-q.y,X=q.x,Y=W*T+X*V;0>Y&&(W=-W,X=-X);var Z=T*q.x+V*q.y;0>Z&&(Z=-Z);var $=R.sin(R.acos(Z));0>$&&($=-$);var _=.2;c.kind==Nb?_=1.1:c.kind==Qb&&(_=1.1),q.x*=Z*_*Q,q.y*=Z*_*Q,W*=$*Q,X*=$*Q,ac.v.x=q.x+W,ac.v.y=q.y+X}}ac.prevX=ac.x,ac.prevY=ac.y}var bb,cb=(mc+nc)*(mc+nc),db=2*cb,eb=(mc-lc)*(mc-lc),fb=$b.length;for(a=0;a<_b.n;a++){bb=_b[a];var gb=bb.x-ac.x,ib=bb.y-ac.y,kb=gb*gb+ib*ib;if(cb>kb)bb.m=null,_b[a]=_b[_b.n-1],_b[_b.n-1]=bb,a--,_b.n--,fc=pc,gc=1,0===_b.n&&i();else if(db>kb&&(bb.x=bb.x-.3*gb,bb.y=bb.y-.3*ib),bb.m)bb.m.dead?bb.m=null:(bb.x=bb.m.x+bb.dx,bb.y=bb.m.y+bb.dy);else for(var lb=0;fb>lb;lb++){var mb=$b[lb];gb=bb.x-mb.x,ib=bb.y-mb.y,kb=gb*gb+ib*ib,eb>kb&&(bb.m=mb,bb.dx=gb,bb.dy=ib)}}}function e(){fb=db,gb=eb;var a=ac.x,b=ac.y,c=a-jb,d=b-jb,e=c,f=d;0>e&&(e*=-1),0>f&&(f*=-1);var g=Y/2+$;if(g>e&&g>f){var h=e-g,i=f-g,j=h*h+i*i;if(g*g>j){var k=T(j);h=h*g/k,i=i*g/k,a=h+g,b=i+g,0>c&&(a=-a),0>d&&(b=-b),a=jb+a,b=jb+b}}else f>e?a=jb:b=jb;a=w(a,ac.x-.3*ab,ac.x+.3*ab),b=w(b,ac.y-.3*bb,ac.y+.3*bb),a=w(a-ab/2,0,ib-ab),b=w(b-bb/2,0,ib-bb),qc?(db+=.1*(a-db),eb+=.1*(b-eb)):(db=a,eb=b),db>>=0,eb>>=0}function f(){var a=qc;K(rb),K(vb);var b,c;a?(H(rb,sb,0,0),tb.clearRect(0,0,ab,bb),tb.save(),tb.globalAlpha=.9,H(tb,qb,-db+fb,-eb+gb),tb.restore(),K(rb),F(tb,Ib[ac.elt][1]),Ec>0?I(tb,ac.prevX-db,ac.prevY-eb,6,W):I(tb,ac.x-db,ac.y-eb,2,W)):K(tb),_b.cpt++;var d=170+34*R.cos(_b.cpt/20)>>0;d=d.toString(16),F(vb,null,"#"+d+d+"00",2);var e,f,g=2*S,h=db-nc,i=db+ab+nc,j=eb-nc,k=eb+ab+nc;for(b=0;b<_b.n;b++){var m=_b[b];e=m.x,f=m.y,e>h&&i>e&&f>j&&k>f&&(vb.beginPath(),vb.arc(e-db,f-eb,nc,0,g),vb.stroke())}var n=nb+2*mb;for(b=0,c=$b.length;c>b;b++){var o=$b[b],p=1;o.dead?(o.cpt-=10,o.cpt<=0?l(o):p=o.cpt/50):o.cpt<50&&(o.cpt++,p=o.cpt/50),o.colCpt>0&&o.colCpt--;var q=Yb[ac.elt]==o.elt,r=ac.elt==o.elt;F(vb,r?Fb:q?Ib[o.elt][0]:Hb,r?o.colCpt>0?Gb:Eb:Hb,2),vb.globalAlpha=p*(r?.5:q?.2:.4),I(vb,o.x-db,o.y-eb,o.r,W),o.elt==Vb&&(vb.globalAlpha=1,vb.globalCompositeOperation="destination-out",I(vb,o.x-db,o.y-eb,17,W),vb.globalCompositeOperation="source-over"),vb.globalAlpha=p,q||I(vb,o.x-db,o.y-eb,o.r,X,W),vb.globalAlpha=p*(r?.4:q?.7:1),s=0,t=0,q&&(s=3*(R.random()-.5),t=3*(R.random()-.5)),r&&(vb.globalAlpha=.4*p),vb.drawImage(yb,o.elt*n,0,n,n,o.x-n/2-db+s,o.y-n/2-eb+t,n,n)}vb.globalAlpha=1;var s,t;for(b=0,c=Zb.length;c>b;b++){var u,v=Zb[b],x=v.x-db,y=v.y-eb;v!=ac&&(v.shape==Jb&&v.kind==Nb?(v.colCpt>0?(v.colCpt--,u=Gb):u=Eb,F(vb,"#000",u,2),I(vb,x,y,v.r,W,W)):v.shape==Kb&&v.kind!=Mb&&(u=Eb,v.kind==Pb&&(u=Ib[v.elt][1]),F(vb,0,u,2),J(vb,v.x-db,v.y-eb,v.x2-db,v.y2-eb)))}if(ac){var z;qc?(z=R.atan2(ac.v.y,ac.v.x),tc=0):(z=ac.sa,tc+=.05),ac.cpt=++ac.cpt%20;var A=ac.cpt;if(A>10&&(A=20-A),qc||(A=2+8*(sc/rc)>>0,z+=R.cos(tc)*S/3,uc=z),A*=.3*S/10,s=0,t=0,sc>0&&!qc){var B=4*w(sc/rc,0,1)>>0;s=B*U()>>0,t=B*U()>>0}ac.elt!=Wb&&kc>0&&(vb.save(),vb.translate(ac.x-db+s,ac.y-eb+t),vb.rotate(z),F(vb,"#fff","#000",1),vb.beginPath(),vb.arc(-10,0,20,0,2.2),vb.lineTo(0,0),vb.arc(-10,0,20,-0,-2.2,!0),vb.lineTo(0,0),vb.closePath(),vb.fill(),vb.stroke(),vb.globalCompositeOperation="destination-out",I(vb,0,0,mc,"#fff"),vb.restore()),F(vb,Ib[ac.elt][0],Ib[ac.elt][1],2),0===A?I(vb,ac.x-db+s,ac.y-eb+t,mc,W,W):L(vb,ac.x-db+s,ac.y-eb+t,ac.r,z,A,W,W)}H(rb,ob,-db,-eb),a&&H(rb,sb,0,0),H(rb,ub,0,0)}function g(){var a=!1;ac.x+mc<0?(a=!0,ac.x=50,ac.y=jb,ac.sa=0):ac.x-mc>ib?(a=!0,ac.x=ib-50,ac.y=jb,ac.sa=-S):ac.y+mc<0?(a=!0,ac.y=50,ac.x=jb,ac.sa=S/2):ac.y-mc>ib&&(a=!0,ac.y=ib-50,ac.x=jb,ac.sa=-S/2),a&&(qc=!1,sc=0,ac.elt=Wb,ac.v.x=0,ac.v.y=0,hc=pc,dc--,0===dc&&i())}function h(){K(xb);var a,b=9,c=14;for(a=0;dc>a;a++)F(xb,Ib[Wb][0],"red"),L(xb,50+lb/2+a*(b+c),lb/2,b,0,.3,!0);if(ic>0&&ic--,qc){var d=20,e=102,f=(ab-e)/2,g=(lb-d)/2;F(xb,Cb),G(xb,f,g,e,d),ic&&(F(xb,"#f00"),xb.globalAlpha=ic/rc,G(xb,f-2,g-2,e+4,d+4),xb.globalAlpha=1),kc>0&&ac.elt!=Wb&&(F(xb,"#fff"),e=(e-2)*(kc/Fc)>>0,f=(ab-e)/2+1,G(xb,f,g,e,d),F(xb,0,Cb,2),xb.save(),xb.translate(ab/2,g+10),xb.rotate(-S/2),xb.beginPath(),xb.arc(-10,0,18,-0,-1.4,!0),xb.lineTo(0,0),xb.closePath(),xb.stroke(),xb.beginPath(),xb.arc(-10,0,18,0,1.4),xb.lineTo(0,0),xb.closePath(),xb.stroke(),xb.restore())}F(xb,0,"#cc0",3),I(xb,ab-20,lb/2,8,!1,!0);var h=(Date.now()-ec)/1e3>>0,i=h/60>>0,j=h%60;if(10>j&&(j="0"+j),h=i+":"+j,F(xb,"#fff"),xb.font="18px sans-serif",xb.textAlign="left",xb.textBaseline="middle",xb.fillText(h,10,lb/2),!qc){xb.textAlign="center";var k=50>sc?"Hold right mouse button":"Release to launch !";xb.fillText(k,ab/2,lb/2)}var l=_b.length-_b.n+" / "+_b.length;fc>0&&(fc--,gc>0?(F(xb,"#0f0"),l=V(8593)+" "+l):(F(xb,"#f00"),l=V(8595)+" "+l)),xb.textAlign="right",xb.fillText(l,ab-38,lb/2),hc>0&&hc--}function i(){}function j(){stb&&stb(),c(),d(),e(),f(),h(),g(),ste&&ste(),window.requestAnimationFrame(j)}function k(){ac=n(o(jb,ib-50,mc,Lb)),ac.v={x:0,y:0},ac.cpt=0,ac.elt=Wb,ac.sa=-S/2,r(p(0,220,150,100,Ob)),cc=[];var a,b,c,d=4;for(b=0;d>b;b++){var e=lc-4,f=2*e+(_-2*e)*b/d>>0,g=2*U()*S;a=o(0,0,e,Nb),cc.push(n(a));var h=(.2+.2*U())*(U()>.5?-1:1);a.da=h/f,a.a=g,a.d=f}for(b=1;d>b;b++)for(c=0;b>c;c++)a=t(cc[b]),a.a+=2*S*(c+1)/(b+1),cc.push(n(a));r(p(150,100,300,30,Pb)),bc=Zb.slice(-8);var i=bc[0],j=x(i.x-i.x2,i.y-i.y2),k=2*-R.acos((i.x2-i.x)/j);for(b=0;b<bc.length;b++)i=bc[b],i.l=j,i.ux=i.x2-i.x,i.uy=i.y2-i.y,i.amax=k,(1==i.elt||2==i.elt)&&(i.amax*=-1);_b=[],_b.n=0,_b.cpt=0;var q,s,u=6,v=11,w=R.random()*S;for(b=1;u>=b;b++)for(c=1;v>=c;c++)s=2*S*(c/v)+.1*b+w,q=m(Jb,Rb),q.r=nc,_b[_b.n]=q,_b.n++,q.x=jb+R.cos(s)*b*hb/u,q.y=jb+R.sin(s)*b*hb/u;for(b=0;4>b;b++){var y=m(Jb,Qb);$b.push(y),y.elt=b,y.r=lc,y.sy=0===b||1==b?Z:ib-Z,y.sx=0===b||3==b?Z:ib-Z,y.hx=jb+.5*Y*(1==b?1:3==b?-1:0),y.hy=jb+.5*Y*(0===b?1:2==b?-1:0),l(y)}}function l(a){a.tx=a.hx,a.ty=a.hy,a.x=a.sx,a.y=a.sy,a.cpt=0,a.dead=!1,a.da=0,a.a=0,a.d=1}function m(a,b,c,d){return{x:c||0,y:d||0,shape:a,kind:b}}function n(a){return Zb.push(a),a}function o(a,b,c,d){var e=m(Jb,d,a,b);return e.r=c,e}function p(a,b,c,d,e){var f=m(Kb,e,a,b);return f.x2=c,f.y2=d,f}function q(a){for(var b=0;4>b;b++){var c=t(a);s(c,"x","y",b),c.shape==Kb&&s(c,"x2","y2",b),n(c),c.elt=b}}function r(a){q(a),a.x=Y-a.x,a.shape==Kb&&(a.x2=Y-a.x2),a.mirror=!0,q(a)}function s(a,b,c,d){var e=a[b],f=a[c];if(0===d||2==d)e+=Z+$,0===d&&(f=ib-f);else{var g=f;f=Z+$+e,e=g,1==d&&(e=ib-e)}a[b]=e>>0,a[c]=f>>0}function t(a){return JSON.parse(JSON.stringify(a))}function u(a){return a}function v(a){return ib-a}function w(a,b,c){return b>a?b:a>c?c:a}function x(a,b){return T(a*a+b*b)}function y(a,b){b=(b||1)/x(a.x,a.y),a.x*=b,a.y*=b}function z(a,b){var c=a.x-b.x,d=a.y-b.y,e=a.r+b.r;return e*e>c*c+d*d}function A(a,b,c){var d=a.x,e=a.y,f=a.r,g=b.x,h=b.y,i=b.x2,j=b.y2,k=i-g,l=j-h,m=R.sqrt(k*k+l*l),n=(i-g)/m,o=(j-h)/m,p=n*(d-g)+o*(e-h),q=p*n+g,r=p*o+h;if((i>g&&q>=g&&i>=q||g>i&&q>=i&&g>=q||g==i&&q==g)&&(j>h&&r>=h&&j>=r||h>j&&r>=j&&h>=r||h==j&&r==h)){var s=r-e,t=q-d,u=T(t*t+s*s);if(f>=u)return c.ex=q,c.ey=r,c.x=-t,c.y=-s,c.l=u,!0}return!1}function B(a,b,c,d,e){b==d?(a.vert=!0,a.x=b):(a.vert=!1,a.m=(c-e)/(b-d),a.p=c-a.m*b)}function C(a,b,c,d){return a.vert?b<a.x:d?b>(c-a.p)/a.m:c>a.m*b+a.p}function D(a,b){var c=P.createElement("canvas");return c.width=a,c.height=b,c}function E(a){return a.getContext("2d")}function F(a,b,c,d){b&&(a.fillStyle=b),c&&(a.strokeStyle=c),d&&(a.lineWidth=d)}function G(a,b,c,d,e,f){f&&(f.width&&(f=a.createPattern(f,"repeat")),F(a,f)),a.fillRect(b,c,d,e)}function H(a,b,c,d){a.drawImage(b,c,d)}function I(a,b,c,d,e,f){a.beginPath(),a.arc(b,c,d,0,2*S,!1),e&&a.fill(),f&&a.stroke()}function J(a,b,c,d,e){a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke()}function K(a){a.clearRect(0,0,ab,bb)}function L(a,b,c,d,e,f,g,h){a.beginPath(),a.arc(b,c,d,e+f,e-f),a.lineTo(b,c),a.closePath(),g&&a.fill(),h&&a.stroke()}function M(a,b){b||(b=window.e);var c=b.keyCode;b.charCode&&!c&&(c=b.charCode),Ic[Kc[c]]=a}function N(a,b){var c,d;"which"in b?(c=3==b.which,d=2==b.which):"button"in b&&(c=2==b.button,d=1==b.button),c?Jc.right=a:d?Jc.middle=a:Jc.left=a,P.onmousemove(b)}var O=window,P=O.document,Q=P.body,R=O.Math,S=R.PI,T=R.sqrt,U=R.random,V=String.fromCharCode,W=!0,X=!1,Y=700,Z=220,$=200,_=$+Y/2;_=x(_,_)-$>>0;var ab,bb,cb,db,eb,fb,gb,hb=(Y/2+x(Y/2,Y/2))/2,ib=Y+2*Z+2*$,jb=ib/2,kb=20,lb=50,mb=4,nb=40,ob=D(ib,ib),pb=E(ob),qb=D(),rb=E(qb),sb=D(),tb=E(sb),ub=D(),vb=E(ub),wb=D(),xb=E(wb),yb=D(4*(nb+2*mb),nb+2*mb),zb=E(yb);window.onresize=function(){ab=w(O.innerWidth,Y,ib),bb=w(O.innerHeight-lb,Y,ib),cb=R.min(ab,bb),wb.width=ub.width=sb.width=qb.width=ab-=ab%2,ub.height=sb.height=qb.height=bb-=bb%2,wb.height=lb},Q.onresize(),Q.appendChild(wb),Q.appendChild(qb);var Ab="#111",Bb="#222",Cb="#333",Db="#444",Eb="#08e",Fb="#000",Gb="#8f8",Hb="#f02",Ib=[["#aef","#5af"],["#fa0","#f53"],["#a64","#864","#fd7"],["rgba(255,255,255,0.5","#fff","#fff"],["#ff6","#555"]],Jb="c",Kb="l",Lb="b",Mb="bg",Nb="bp",Ob="o",Pb="p",Qb="m",Rb="ring",Sb=0,Tb=1,Ub=2,Vb=3,Wb=4,Xb=["Water","Fire","Earth","Air"],Yb={};Yb[Sb]=Tb,Yb[Tb]=Sb,Yb[Ub]=Vb,Yb[Vb]=Ub;var Zb,$b,_b,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc=38,mc=16,nc=8,oc=5,pc=50,qc=!1,rc=100,sc=0,tc=0,uc=0,vc=10,wc=.2,xc=1,yc=1,zc=12,Ac=.2*vc,Bc=.8*vc,Cc=0,Dc=0,Ec=0,Fc=150,Gc={},Hc={},Ic={},Jc={};b(),j();var Kc={37:"left",65:"left",81:"left",38:"up",90:"up",87:"up",83:"down",40:"down",39:"right",68:"right",32:"space",27:"esc",13:"Enter"};P.onkeyup=function(a){M(!1,a),27==a.keyCode&&(window._stopped?(window._stopped=!1,window.requestAnimationFrame=window._raf):(window._stopped=!0,window._raf=window.requestAnimationFrame,window.requestAnimationFrame=function(){})),13==a.keyCode&&window._stopped&&j()},P.onkeydown=function(a){M(!0,a)},P.onmousedown=function(a){N(!0,a)},P.onmouseup=function(a){N(!1,a)},P.onmousemove=function(a){Jc.x=a.clientX+db,Jc.y=a.clientY+eb-lb},P.oncontextmenu=function(){return!1}};